from flask import Flask
from bot import bot
import asyncio
import threading
from pyrogram import idle

app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'TechifyBots is Running!'

def run_bot():
    """‡∞¨‡±ç‡∞Ø‡∞æ‡∞ï‡±ç‚Äå‡∞ó‡±ç‡∞∞‡±å‡∞Ç‡∞°‡±ç‚Äå‡∞≤‡±ã ‡∞¨‡∞æ‡∞ü‡±ç‚Äå‡∞®‡±Å ‡∞∞‡∞®‡±ç ‡∞ö‡±á‡∞∏‡±á ‡∞´‡∞Ç‡∞ï‡±ç‡∞∑‡∞®‡±ç"""
    loop = asyncio.new_event_loop()
    asyncio.set_event_loop(loop)
    
    # ‡∞¨‡∞æ‡∞ü‡±ç‚Äå‡∞®‡±Å ‡∞∏‡±ç‡∞ü‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç
    loop.run_until_complete(bot.start())
    print("‡∞ü‡±Ü‡∞≤‡∞ø‡∞ó‡±ç‡∞∞‡∞æ‡∞Æ‡±ç ‡∞¨‡∞æ‡∞ü‡±ç ‡∞∏‡±ç‡∞ü‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞ø‡∞Ç‡∞¶‡∞ø! üéâ")
    
    # ‡∞¨‡∞æ‡∞ü‡±ç ‡∞Ü‡∞®‡±ç‡∞≤‡±à‡∞®‡±ç‚Äå‡∞≤‡±ã ‡∞â‡∞Ç‡∞°‡∞ü‡∞æ‡∞®‡∞ø‡∞ï‡∞ø idle ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç
    loop.run_until_complete(idle())

# ‡∞¨‡∞æ‡∞ü‡±ç‚Äå‡∞®‡±Å ‡∞µ‡∞ø‡∞°‡∞ø‡∞ó‡∞æ ‡∞í‡∞ï ‡∞•‡±ç‡∞∞‡±Ü‡∞°‡±ç‚Äå‡∞≤‡±ã ‡∞∏‡±ç‡∞ü‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç
# ‡∞á‡∞¶‡∞ø ‡∞µ‡±Ü‡∞¨‡±ç ‡∞∏‡∞∞‡±ç‡∞µ‡∞∞‡±ç‚Äå‡∞§‡±ã ‡∞∏‡∞Ç‡∞¨‡∞Ç‡∞ß‡∞Ç ‡∞≤‡±á‡∞ï‡±Å‡∞Ç‡∞°‡∞æ ‡∞∞‡∞®‡±ç ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
threading.Thread(target=run_bot, daemon=True).start()

# ‡∞á‡∞ï‡±ç‡∞ï‡∞° app.run() ‡∞â‡∞Ç‡∞°‡∞ï‡±Ç‡∞°‡∞¶‡±Å. 
# ‡∞é‡∞Ç‡∞¶‡±Å‡∞ï‡∞Ç‡∞ü‡±á Render 'gunicorn app:app' ‡∞¶‡±ç‡∞µ‡∞æ‡∞∞‡∞æ ‡∞∏‡∞∞‡±ç‡∞µ‡∞∞‡±ç‚Äå‡∞®‡±Å ‡∞∞‡∞®‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.
